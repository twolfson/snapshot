/*! snapshot - v0.1.0 - 2012-11-21
* https://github.com/twolfson/snapshot
* Copyright (c) 2012 Todd Wolfson; Licensed MIT */
(function(){"use strict";function t(t,n,r){var i=getComputedStyle(n);if(e)t.style.cssText=i.cssText;else for(var s in i)isNaN(parseInt(s,10))&&typeof i[s]!="function"&&!/^(cssText|length|parentRule)$/.test(s)&&(t.style[s]=i[s])}function n(e,n){var r=e.querySelectorAll("*"),i=n.querySelectorAll("*");t(e,n,1),Array.prototype.forEach.call(r,function(e,n){t(e,i[n])}),e.style.margin=e.style.marginLeft=e.style.marginTop=e.style.marginBottom=e.style.marginRight=""}var e=getComputedStyle(document.body).cssText!=="";window.domvas={toImage:function(e,t,r,i,s,o){s=s||0,o=o||0;var u=e.cloneNode(!0);n(u,e),u.setAttribute("xmlns","http://www.w3.org/1999/xhtml");var a=(new XMLSerializer).serializeToString(u),f="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='"+((r||e.offsetWidth)+s)+"' height='"+((i||e.offsetHeight)+o)+"'>"+"<foreignObject width='100%' height='100%' x='"+s+"' y='"+o+"'>"+a+"</foreignObject>"+"</svg>",l=new Image;l.src=f,l.onload=function(){t&&t.call(this,this)}}}})(),function(e){function t(e,t){var n=e.iframe||e;n.onload=function(){var e=n.contentWindow.document.body,r=getComputedStyle(n),i=parseInt(r.height,"10"),s=parseInt(r.width,"10");domvas.toImage(e,function(e){t(null,e)},s,i)}}e.iframe2image=t}(typeof exports=="object"&&exports||this),function(e){function t(e,t){var n=e.url||e,r=document.createElement("iframe"),i=document.body;r.height=window.innerHeight,r.width=window.innerWidth,r.style.cssText="display: none;",i.appendChild(r),r.setAttribute("src",n),iframe2image(r,function(e,n){return i.removeChild(r),t.apply(this,arguments)})}e.snapshot=t}(typeof exports=="object"&&exports||this);